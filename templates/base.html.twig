<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>{% block title %} | AFTERGLOW FESTIVAL{% endblock %}</title>
    <link rel="icon" type="image/x-icon" href="{{ asset('images/logoAfterglow.png') }}">
    <link rel="icon"
          href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 128 128%22><text y=%221.2em%22 font-size=%2296%22>⚫️</text><text y=%221.3em%22 x=%220.2em%22 font-size=%2276%22 fill=%22%23fff%22>sf</text></svg>">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700;900&display=swap" rel="stylesheet">

    {% block stylesheets %}
        {{ encore_entry_link_tags('app') }}

        <link rel="stylesheet" href="{{ asset('styles/style.css') }}">
    {% endblock %}

    {% block javascripts %}
        {{ encore_entry_script_tags('app') }}
        {% block importmap %}{{ importmap('app') }}{% endblock %}
    {% endblock %}
</head>
<body>


<nav>
    <div class="nav-left">
        <img src="{{ asset('images/logoAfterglow.png') }}" alt="Logo" class="logo">
    </div>

    <a href="{{ path('app_main') }}" class="nav-title"><h1 class="nav-title">AFTERGLOW FESTIVAL</h1></a>

    <div class="burger" id="burger-menu">
        <span></span><span></span><span></span>
    </div>

    <div class="nav-right">
        <ul>
            <li><a href="{{ path('app_main') }}">HOME</a></li>
            {% if is_granted('IS_AUTHENTICATED') %}
                <li><a href="{{ path('artist_list', { 'page': 1 }) }}">LINE UP</a></li>
            {% endif %}
            {% if is_granted('ROLE_ADMIN') %}
                <li><a href="{{ path('music_add') }}">ADD MUSIC</a></li>
                <li><a href="{{ path('artist_add') }}">ADD ARTIST</a></li>
            {% endif %}
            <li><a href="{{ path('app_about') }}">ABOUT US</a></li>
            {% if is_granted('IS_AUTHENTICATED') %}
                <li><a href="{{ path('app_logout') }}">LOGOUT</a></li>
            {% else %}
                <li><a href="{{ path('app_login') }}">LOGIN</a></li>
                <li><a href="{{ path('app_register') }}">REGISTER</a></li>
            {% endif %}

        </ul>
    </div>
</nav>

<div class="flash-container">
    {% for type, messages in app.flashes %}
        {% for message in messages %}
            <div class="flash-{{ type }} flash">
                {{ message }}
            </div>
        {% endfor %}
    {% endfor %}
</div>

<div class="blob-wrapper">
    <div>
        {% block body %}
        {% endblock %}
    </div>
</div>


<script>
    document.addEventListener('DOMContentLoaded', () => {
        const burger = document.getElementById('burger-menu');
        const navRightUl = document.querySelector('.nav-right ul');

        burger.addEventListener('click', (e) => {
            e.stopPropagation(); // empêche la fermeture immédiate
            burger.classList.toggle('open');
            navRightUl.classList.toggle('open');
        });

        // Clic en dehors ferme menu si ouvert
        document.addEventListener('click', () => {
            if (navRightUl.classList.contains('open')) {
                navRightUl.classList.remove('open');
                burger.classList.remove('open');
            }
        });

        // Empêche fermeture quand on clique dans le menu
        navRightUl.addEventListener('click', (e) => {
            e.stopPropagation();
        });
    });
</script>


</body>


<footer><p>&copy;Afterglow Festival {{ "now"|date("Y") }}</p></footer>
</html>
